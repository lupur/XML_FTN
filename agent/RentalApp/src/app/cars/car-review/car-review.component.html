<div class="card-body">
	<form [formGroup]="form" (ngSubmit)="onSubmit()">
		<div class="form-row">
			<div class="form-group col">
				<input type="number" class="form-control" formControlName="rating" placeholder="Rating 1-5"
					[ngClass]="{'is-invalid': submitted && f.rating.errors}">
				<div *ngIf="submitted && f.rating.errors" class="invalid-feedback">
					<div *ngIf="f.rating.errors.required">Rating is required</div>
					<div *ngIf="f.rating.errors.min">Minimum rating is 1</div>
					<div *ngIf="f.rating.errors.max">Maximum rating is 5</div>
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col mr-auto">
				<textarea type="text" class="form-control" formControlName="comment"
					placeholder="Enter your review here" rows="4"
					[ngClass]="{'is-invalid': submitted && f.comment.errors}"></textarea>
				<div *ngIf="submitted && f.comment.errors" class="invalid-feedback">
					<div *ngIf="f.comment.errors.required">Review comment cannot be empty</div>
				</div>
			</div>
		</div>
		<div class="form-row">
			<div class="form-group col p-2">
				<button [disabled]="loading" class="btn btn-primary float-right">
					<span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
					Add Review
				</button>
			</div>
		</div>
	</form>
</div>

<div class="card">
	<ul class="list-group list-group-flush">
		<li class="list-group-item" *ngFor="let review of reviews">
			<div class="d-flex bd-highlight mb-2">
				<div class="p-2 mr-auto bd-highlight"><strong>{{review.authorDisplayName}}</strong></div>
				<div class="p-2 bd-highlight"><span class="text-muted">{{review.createdOn | date: 'medium'}}</span>
				</div>
			</div>
			<div class="d-flex bd-highlight mb-2">
				<div class="p-2 mr-auto bd-highlight">{{review.comment}}</div>
			</div>
		</li>
	</ul>
</div>
